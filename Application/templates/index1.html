<!DOCTYPE html>
<!-- Coding By CodingNepal - codingnepalweb.com -->
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Registration or Sign Up form in HTML CSS | CodingLab </title> 
   </head>
<body>
  <div class="wrapper">
    <div class="header">
        <div>
            <p>User</p>
        </div>
        <div>
            <a href="">test</a>
            <a href="">test</a>
            <a href="">test</a>
        </div>
    </div>
    <div class="a1">
        <div class="users">
            <p>test</p>
        </div>
        <div class="chat">
            
                <div id="chat">
                    {%  for msg in messages %}
                    <p>{{msg[0]}}</p>
                    {%end%}
                </div>
                <form action="#">
                <input type="text" id="message" placeholder="Enter your message" required>
                <button id="sendButton" >Send</button>
            </form>
        </div>
    </div>
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
        const ws = new WebSocket("ws://127.0.0.1:8888/chat");
        const chatDiv = document.getElementById("chat");
        chatDiv.scrollTop = chatDiv.scrollHeight;
        ws.onmessage = function (event) {
            const message = event.data;
            const chatDiv = document.getElementById("chat");
            chatDiv.innerHTML += message + "<br>";
            chatDiv.scrollTop = chatDiv.scrollHeight;
        };

        document.getElementById("sendButton").addEventListener("click", sendMessage);

        function sendMessage() {
            const textInput = document.getElementById("message");
            const message= textInput.value;
            if (message.trim() !== "") {
                ws.send(message);
                textInput.value = "";
            }
        }
    });
</script>
</body>
</html>